# v2.5.0 éƒ¨ç½²æŒ‡å—

## ğŸ¯ æœ¬æ¬¡æ›´æ–°é‡ç‚¹

### 1. é…ç½®æŒä¹…åŒ– âœ…
**ä¸¥é‡é—®é¢˜ä¿®å¤**: Telegram Bot æ·»åŠ çš„èŠ‚ç‚¹é‡å¯åä¸å†ä¸¢å¤±ï¼

### 2. èŠ‚ç‚¹è‡ªåŠ¨å‘½å âœ…
ç®€åŒ–æ“ä½œ: `/add http://1.2.3.4:80` è‡ªåŠ¨ç”Ÿæˆåç§°

### 3. æ‰¹é‡æ“ä½œ âœ…
æ•ˆç‡æå‡: `/batchadd` å’Œ `/batchdel` æ”¯æŒæ‰¹é‡ç®¡ç†

### 4. Nginx é…ç½®ä¼˜åŒ– âœ…
- ä¸­æ–‡æ–‡ä»¶åæ”¯æŒ
- CORS è·¨åŸŸæ”¯æŒ
- æ¸…ç†12ä¸ªæ— ç”¨é…ç½®æ–‡ä»¶

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### åœ¨è¿œç¨‹æœåŠ¡å™¨ 183.179.251.164 ä¸Šæ‰§è¡Œï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /usr/local/go-emby2openlist

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull
git fetch --tags

# 3. åˆ‡æ¢åˆ° v2.5.0
git checkout v2.5.0

# 4. æŸ¥çœ‹æ›´æ–°å†…å®¹
git log v2.4.6..v2.5.0 --oneline

# 5. é‡æ–°æ„å»º Docker é•œåƒ
docker build -t go-emby2openlist:v2.5.0 .

# 6. åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨
docker stop go-emby2openlist
docker rm go-emby2openlist

# 7. å¯åŠ¨æ–°å®¹å™¨
docker run -d \
  --name go-emby2openlist \
  --network host \
  -v /usr/local/go-emby2openlist/config:/app/config \
  go-emby2openlist:v2.5.0

# 8. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker logs --tail=50 go-emby2openlist

# 9. éªŒè¯ç‰ˆæœ¬
docker logs go-emby2openlist 2>&1 | grep "ge2o:v"
```

---

## âœ… åŠŸèƒ½éªŒè¯

### 1. æµ‹è¯•èŠ‚ç‚¹è‡ªåŠ¨å‘½å
```bash
# Telegram Bot ä¸­æ‰§è¡Œ
/add http://8.134.192.250:46621

# åº”è¯¥è¿”å›ç±»ä¼¼ï¼š
# âœ… èŠ‚ç‚¹æ·»åŠ æˆåŠŸ
# â€¢ åç§°: node-8134-1
# â€¢ ä¸»æœº: http://8.134.192.250:46621
# â€¢ æƒé‡: 100
```

### 2. æµ‹è¯•æ‰¹é‡æ·»åŠ 
```bash
/batchadd http://1.2.3.4:80 http://5.6.7.8:80:50

# åº”è¯¥è¿”å›ï¼š
# âœ… æˆåŠŸæ·»åŠ  2 ä¸ªèŠ‚ç‚¹
```

### 3. æµ‹è¯•é…ç½®æŒä¹…åŒ–ï¼ˆé‡è¦ï¼ï¼‰
```bash
# Telegram Bot ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•èŠ‚ç‚¹
/add http://test.example.com:80

# æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
/list

# é‡å¯å®¹å™¨
docker restart go-emby2openlist

# ç­‰å¾…5ç§’
sleep 5

# Telegram Bot å†æ¬¡æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
/list

# âœ… åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰æ·»åŠ çš„æµ‹è¯•èŠ‚ç‚¹ï¼ˆä¸ä¼šä¸¢å¤±ï¼‰
```

### 4. æµ‹è¯•è§†é¢‘æ’­æ”¾ï¼ˆCORS + ä¸­æ–‡æ–‡ä»¶åï¼‰
```bash
# åœ¨æµè§ˆå™¨ä¸­è®¿é—® Embyï¼Œæ’­æ”¾ä¸­æ–‡æ–‡ä»¶åçš„è§†é¢‘
# åº”è¯¥èƒ½æ­£å¸¸æ’­æ”¾ï¼Œä¸å†å‡ºç° CORS é”™è¯¯æˆ– 404
```

---

## ğŸ“ Nginx é…ç½®æ›´æ–°ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ›´æ–° Nginx é…ç½®ï¼š

```bash
# 1. å¤åˆ¶æœ€æ–°é…ç½®
cd /usr/local/go-emby2openlist
cp nginx/video-gateway-URL-DECODE-FIX.conf /etc/nginx/sites-available/video-gateway.conf

# 2. æµ‹è¯•é…ç½®
nginx -t

# 3. é‡æ–°åŠ è½½
nginx -s reload

# 4. æŸ¥çœ‹é…ç½®è¯´æ˜
cat nginx/README.md
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: èŠ‚ç‚¹ä»ç„¶ä¸¢å¤±
**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®æŒ‚è½½
docker inspect go-emby2openlist | grep -A 5 Mounts

# ç¡®ä¿é…ç½®ç›®å½•æŒ‚è½½æ­£ç¡®
# -v /usr/local/go-emby2openlist/config:/app/config
```

### é—®é¢˜2: Docker æ„å»ºå¤±è´¥
**è§£å†³**:
```bash
# å¦‚æœ golang:1.24-alpine æ‹‰å–å¤±è´¥
# ç¼–è¾‘ Dockerfileï¼Œæ”¹ç”¨å›½å†…é•œåƒ
# æˆ–ä½¿ç”¨å·²æ„å»ºå¥½çš„é•œåƒ
```

### é—®é¢˜3: æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```bash
# Go åº”ç”¨æ—¥å¿—
docker logs -f go-emby2openlist

# Nginx æ—¥å¿—
tail -f /var/log/nginx/video_internal_error.log
tail -f /var/log/nginx/video_internal_access.log
```

---

## ğŸ“ æ–°å¢ Telegram å‘½ä»¤

```bash
/help           # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ï¼ˆå·²æ›´æ–°ï¼‰
/add <host>     # æ·»åŠ èŠ‚ç‚¹ï¼ˆè‡ªåŠ¨å‘½åï¼‰
/batchadd       # æ‰¹é‡æ·»åŠ èŠ‚ç‚¹
/batchdel       # æ‰¹é‡åˆ é™¤èŠ‚ç‚¹
/list           # åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹
/status         # æŸ¥çœ‹å¥åº·çŠ¶æ€
```

---

## ğŸ‰ é¢„æœŸæ•ˆæœ

1. âœ… èŠ‚ç‚¹é…ç½®æ°¸ä¹…ä¿å­˜ï¼ˆé‡å¯ä¸ä¸¢å¤±ï¼‰
2. âœ… æ·»åŠ èŠ‚ç‚¹æ›´ç®€å•ï¼ˆè‡ªåŠ¨å‘½åï¼‰
3. âœ… æ‰¹é‡ç®¡ç†æ›´é«˜æ•ˆ
4. âœ… ä¸­æ–‡è§†é¢‘æ–‡ä»¶æ­£å¸¸æ’­æ”¾
5. âœ… CORS é”™è¯¯å·²è§£å†³
6. âœ… é…ç½®æ–‡ä»¶æ›´æ¸…æ™°ï¼ˆ12ä¸ª â†’ 2ä¸ªï¼‰

éƒ¨ç½²å®Œæˆåï¼Œè¯·åœ¨ Telegram Bot ä¸­æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼
