# Docker Compose 配置示例
# 使用说明：复制此文件为 docker-compose.yml，然后根据需要修改配置

version: '3.1'

services:
  go-emby2openlist:
    image: zerolin1010/go-emby2openlist:latest
    container_name: go-emby2openlist
    restart: always

    # 卷挂载
    volumes:
      - ./config.yml:/app/config.yml              # 配置文件（必需）
      - ./logs:/app/logs                          # 日志目录（可选，如果启用鉴权日志）
      # - ./ssl:/app/ssl                          # SSL 证书（可选，如果启用 HTTPS）

    # 端口映射
    ports:
      - 8095:8095                                 # HTTP 服务（必需）- Emby 客户端连接此端口
      - 8094:8094                                 # HTTPS 服务（可选）- 需要配置 SSL
      - 8097:8097                                 # 鉴权服务器（可选）- 如果启用 enable-auth-server

    # 环境变量
    environment:
      - TZ=Asia/Shanghai                          # 时区设置
      - GIN_MODE=release                          # Gin 运行模式（release/debug）

    # 网络模式（可选）
    # network_mode: "host"                        # 使用宿主机网络（如果需要）

    # 健康检查（可选）
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8095"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

# 高级配置示例（多节点部署）
# 如果您需要部署多个实例或与 Nginx 在同一网络中，可以使用以下配置

# networks:
#   emby_network:
#     external: true

# services:
#   go-emby2openlist:
#     networks:
#       - emby_network
